<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÁîµÂ≠êÊú®È±º - ÂäüÂæ∑+1</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #FFA726 0%, #FB8C00 50%, #E65100 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: relative;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.95;
        }
        
        .wooden-fish-container {
            position: relative;
            cursor: pointer;
            user-select: none;
        }
        
        .wooden-fish {
            width: 250px;
            height: 250px;
            font-size: 200px;
            transition: transform 0.1s;
            filter: drop-shadow(0 10px 20px rgba(0,0,0,0.3));
        }
        
        .wooden-fish:active {
            transform: scale(0.95);
        }
        
        .merit-counter {
            text-align: center;
            color: white;
            margin-top: 30px;
            font-size: 2em;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .merit-text {
            position: absolute;
            font-size: 2em;
            font-weight: bold;
            color: #FFD700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            pointer-events: none;
            animation: float-up 1.5s ease-out forwards;
        }
        
        @keyframes float-up {
            0% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
            100% {
                opacity: 0;
                transform: translateY(-150px) scale(1.5);
            }
        }
        
        .controls {
            margin-top: 40px;
            display: flex;
            gap: 20px;
        }
        
        .btn {
            background: white;
            color: #E65100;
            border: none;
            padding: 15px 30px;
            border-radius: 30px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: all 0.3s;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }
        
        .btn:active {
            transform: translateY(-1px);
        }
        
        .auto-mode {
            text-align: center;
            color: white;
            margin-top: 20px;
            font-size: 1.1em;
        }
        
        .auto-mode label {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            cursor: pointer;
        }
        
        .auto-mode input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }
        
        .back-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            background: white;
            color: #E65100;
            text-decoration: none;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: all 0.3s;
        }
        
        .back-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }
        
        /* Á≤íÂ≠êÊïàÊûú */
        .particle {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #FFD700;
            border-radius: 50%;
            pointer-events: none;
            animation: particle-float 1s ease-out forwards;
        }
        
        @keyframes particle-float {
            0% {
                opacity: 1;
                transform: translate(0, 0) scale(1);
            }
            100% {
                opacity: 0;
                transform: translate(var(--tx), var(--ty)) scale(0);
            }
        }
        
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }
            
            .wooden-fish {
                width: 200px;
                height: 200px;
                font-size: 160px;
            }
            
            .controls {
                flex-direction: column;
                gap: 15px;
            }
        }
    </style>
</head>
<body>
    <a href="../index.html" class="back-btn">‚Üê ËøîÂõûÈ¶ñÈ°µ</a>
    
    <div class="header">
        <h1>üôè ÁîµÂ≠êÊú®È±º üôè</h1>
        <p>ÁÇπÂáªÊú®È±ºÔºåÂäüÂæ∑+1</p>
    </div>
    
    <div class="wooden-fish-container" id="woodenFish">
        <div class="wooden-fish">  <img src="../img/2.png" alt="ËßÜËßâÈ°πÁõÆÁªÑÊãõËÅòÂπøÂëä" style="width: 100%; height: auto; display: block; border-radius: 8px;"></div>
    </div>
    
    <div class="merit-counter">
        ÂäüÂæ∑Ôºö<span id="meritCount">0</span>
    </div>
    
    <div class="controls">
        <button class="btn" onclick="resetMerit()">üîÑ ÈáçÁΩÆÂäüÂæ∑</button>
        <button class="btn" onclick="toggleSound()">
            <span id="soundIcon">üîä</span> <span id="soundText">ÂÖ≥Èó≠Èü≥Êïà</span>
        </button>
    </div>
    
    <div class="auto-mode">
        <label>
            <input type="checkbox" id="autoMode" onchange="toggleAutoMode()">
            <span>Ëá™Âä®Êï≤Êú®È±ºÊ®°Âºè</span>
        </label>
    </div>
    
    <script>
        let meritCount = 0;
        let soundEnabled = true;
        let autoInterval = null;
        
        // Âä†ËΩΩ‰øùÂ≠òÁöÑÂäüÂæ∑ÂÄº
        if (localStorage.getItem('merit')) {
            meritCount = parseInt(localStorage.getItem('merit'));
            document.getElementById('meritCount').textContent = meritCount;
        }
        
        const woodenFish = document.getElementById('woodenFish');
        
        // ÂàõÂª∫Èü≥È¢ë‰∏ä‰∏ãÊñá
        const AudioContext = window.AudioContext || window.webkitAudioContext;
        const audioContext = new AudioContext();
        
        // ÁîüÊàêÊú®È±ºÈü≥Êïà
        function playWoodenFishSound() {
            if (!soundEnabled) return;
            
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.value = 800;
            oscillator.type = 'sine';
            
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.1);
        }
        
        // Êï≤Êú®È±º
        function knockWoodenFish(x, y) {
            meritCount++;
            document.getElementById('meritCount').textContent = meritCount;
            localStorage.setItem('merit', meritCount);
            
            playWoodenFishSound();
            
            // ÊòæÁ§∫ÂäüÂæ∑+1ÊñáÂ≠ó
            const meritText = document.createElement('div');
            meritText.className = 'merit-text';
            meritText.textContent = 'ÂäüÂæ∑+1';
            meritText.style.left = x + 'px';
            meritText.style.top = y + 'px';
            document.body.appendChild(meritText);
            
            setTimeout(() => {
                meritText.remove();
            }, 1500);
            
            // ÂàõÂª∫Á≤íÂ≠êÊïàÊûú
            for (let i = 0; i < 8; i++) {
                createParticle(x, y);
            }
        }
        
        // ÂàõÂª∫Á≤íÂ≠ê
        function createParticle(x, y) {
            const particle = document.createElement('div');
            particle.className = 'particle';
            
            const angle = Math.random() * Math.PI * 2;
            const distance = 50 + Math.random() * 50;
            const tx = Math.cos(angle) * distance;
            const ty = Math.sin(angle) * distance;
            
            particle.style.left = x + 'px';
            particle.style.top = y + 'px';
            particle.style.setProperty('--tx', tx + 'px');
            particle.style.setProperty('--ty', ty + 'px');
            
            document.body.appendChild(particle);
            
            setTimeout(() => {
                particle.remove();
            }, 1000);
        }
        
        // ÁÇπÂáª‰∫ã‰ª∂
        woodenFish.addEventListener('click', (e) => {
            const rect = woodenFish.getBoundingClientRect();
            const x = rect.left + rect.width / 2;
            const y = rect.top + rect.height / 2;
            knockWoodenFish(x, y);
        });
        
        // ÈáçÁΩÆÂäüÂæ∑
        function resetMerit() {
            if (confirm('Á°ÆÂÆöË¶ÅÈáçÁΩÆÂäüÂæ∑ÂÄºÂêóÔºü')) {
                meritCount = 0;
                document.getElementById('meritCount').textContent = meritCount;
                localStorage.setItem('merit', meritCount);
            }
        }
        
        // ÂàáÊç¢Èü≥Êïà
        function toggleSound() {
            soundEnabled = !soundEnabled;
            document.getElementById('soundIcon').textContent = soundEnabled ? 'üîä' : 'üîá';
            document.getElementById('soundText').textContent = soundEnabled ? 'ÂÖ≥Èó≠Èü≥Êïà' : 'ÂºÄÂêØÈü≥Êïà';
        }
        
        // Ëá™Âä®Ê®°Âºè
        function toggleAutoMode() {
            const autoMode = document.getElementById('autoMode').checked;
            
            if (autoMode) {
                autoInterval = setInterval(() => {
                    const rect = woodenFish.getBoundingClientRect();
                    const x = rect.left + rect.width / 2;
                    const y = rect.top + rect.height / 2;
                    knockWoodenFish(x, y);
                }, 500);
            } else {
                if (autoInterval) {
                    clearInterval(autoInterval);
                    autoInterval = null;
                }
            }
        }
    </script>
</body>
</html>